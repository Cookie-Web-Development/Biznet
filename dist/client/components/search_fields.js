(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=document.documentElement.getAttribute("lang"),a=document.getElementById("min_range_slider"),r=document.getElementById("max_range_slider"),c=document.getElementById("price_range_display"),o=document.getElementById("range_slider_visual"),i=search_fields.price_range;function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.value,n="hsl(238, 83%, 62%)",l="hsl(360, 0%, 35%)",d=e/i.max*100,u=t/i.max*100;o.style.background="linear-gradient(to right, ".concat(l," 0%, ").concat(l," ").concat(d,"%, ").concat(n," ").concat(d,"%, ").concat(n," ").concat(u,"%, ").concat(l," ").concat(u,"%, ").concat(l," 100%)"),c.textContent="$ ".concat(e," - $ ").concat(t)}[a,r].forEach((function(e){Object.assign(e,{min:i.min,max:i.max,value:e===a?search_query.price_range_min||i.min:search_query.price_range_max||i.max})})),l(),a.addEventListener("input",(function(){+a.value>+r.value&&(a.value=r.value),l()})),r.addEventListener("input",(function(){+r.value<+a.value&&(r.value=a.value),l()}));var d,u=search_fields.tags,s=document.getElementById("selected_tags"),g=document.getElementById("tags_dropdown"),m=document.getElementById("tags_filter_input"),f=e(u);function v(){var e=Array.from(g.querySelectorAll("[data-tag]")),t=Array.from(s.children);e.forEach((function(e){e.remove()})),t.forEach((function(e){e.remove()})),f.length>0&&f.forEach((function(e){var t=document.createElement("option");t.value=e.tag_id,t.text=e.tag_name[n],t.dataset.tag=e.tag_id,g.appendChild(t)})),d.length>0&&d.forEach((function(e){var t=document.createElement("li"),a=document.createElement("label"),r=document.createElement("input"),c=document.createElement("span");t.classList.add("selected_tag"),r.type="checkbox",r.setAttribute("checked",!0),r.value=e.tag_id,r.dataset.tag=e.tag_id,r.name="selected_tags",c.textContent=e.tag_name[n],a.appendChild(r),a.appendChild(c),t.appendChild(a),s.appendChild(t)}))}search_query.selected_tags?(search_query.selected_tags.forEach((function(t){var n;d?(n=d).push.apply(n,e(u.filter((function(e){return e.tag_id==t})))):d=u.filter((function(e){return e.tag_id==t}))})),d.forEach((function(e){f=f.filter((function(t){return t.tag_id!=e.tag_id}))}))):d=[],v(),m.addEventListener("input",(function(){var e=m.value.toLowerCase(),t=g.options;if(""!=e)for(var n=0;n<t.length;n++){var a=t[n];a.text.toLowerCase().includes(e)?a.style.display="":a.style.display="none"}else for(var r=0;r<t.length;r++)t[r].style.display=""})),g.addEventListener("click",(function(t){var n=g.selectedOptions[0];n.dataset.tag&&(f=f.filter((function(e){return e.tag_id!=n.dataset.tag})),d=[].concat(e(d),e(u.filter((function(e){return e.tag_id==n.dataset.tag})))),v(),Array.from(document.getElementById("tags_input_dropdown_container").children).forEach((function(e){e.blur()})),m.value="")})),s.addEventListener("click",(function(t){if(t.target.dataset.tag){var a=u.filter((function(e){return e.tag_id==t.target.dataset.tag}));d=d.filter((function(e){return e.tag_id!=t.target.dataset.tag})),(f=[].concat(e(f),e(a))).sort((function(e,t){return e.tag_name[n]>t.tag_name[n]?1:e.tag_name[n]<t.tag_name[n]?-1:0})),v(),g.dispatchEvent(new Event("sendToAPI"))}})),document.getElementById("search_field_reset").addEventListener("click",(function(){var t=Array.from(document.querySelectorAll("[data-reset]"));f=e(u),d=[],v(),t.forEach((function(e){switch(e.dataset.reset){case"text":e.value="";break;case"select":e.selectedIndex=0;break;case"checkbox":e.checked=!1;break;case"range_min":e.value=i.min,l();break;case"range_max":e.value=i.max,l();break;default:console.log("something wrong with resetBtn")}e.dispatchEvent(new Event("input"))}))}));var _=document.getElementById("catalog_search_form"),h=document.getElementById("search_fields_toggle");h.addEventListener("click",(function(){h.classList.toggle("active"),_.classList.toggle("active")}))})();