(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=document.documentElement.getAttribute("lang"),a=document.querySelector("[data-search-fields]"),r=JSON.parse(a.dataset.searchFields),c=(JSON.parse(a.dataset.quickQuery),{}),i=document.getElementById("min_range_slider"),o=document.getElementById("max_range_slider"),l=document.getElementById("price_range_display"),d=document.getElementById("range_slider_visual"),u=r.price_range;function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.value,n="hsl(238, 83%, 62%)",a="hsl(360, 0%, 35%)",r=e/u.max*100,c=t/u.max*100;d.style.background="linear-gradient(to right, ".concat(a," 0%, ").concat(a," ").concat(r,"%, ").concat(n," ").concat(r,"%, ").concat(n," ").concat(c,"%, ").concat(a," ").concat(c,"%, ").concat(a," 100%)"),l.textContent="$ ".concat(e," - $ ").concat(t)}[i,o].forEach((function(e){Object.assign(e,{min:u.min,max:u.max,value:e===i?c.price_range_min||u.min:c.price_range_max||u.max})})),s(),i.addEventListener("input",(function(){+i.value>+o.value&&(i.value=o.value),s()})),o.addEventListener("input",(function(){+o.value<+i.value&&(o.value=i.value),s()}));var g,m=r.tags,f=document.getElementById("selected_tags"),v=document.getElementById("tags_dropdown"),p=document.getElementById("tags_filter_input"),_=e(m);function h(){var e=Array.from(v.querySelectorAll("[data-tag]")),t=Array.from(f.children);e.forEach((function(e){e.remove()})),t.forEach((function(e){e.remove()})),_.length>0&&_.forEach((function(e){var t=document.createElement("option");t.value=e.tag_id,t.text=e.tag_name[n],t.dataset.tag=e.tag_id,v.appendChild(t)})),g.length>0&&g.forEach((function(e){var t=document.createElement("li"),a=document.createElement("label"),r=document.createElement("input"),c=document.createElement("span");t.classList.add("selected_tag"),r.type="checkbox",r.setAttribute("checked",!0),r.value=e.tag_id,r.dataset.tag=e.tag_id,r.name="selected_tags",c.textContent=e.tag_name[n],a.appendChild(r),a.appendChild(c),t.appendChild(a),f.appendChild(t)}))}c.selected_tags?(c.selected_tags.forEach((function(t){var n;g?(n=g).push.apply(n,e(m.filter((function(e){return e.tag_id==t})))):g=m.filter((function(e){return e.tag_id==t}))})),g.forEach((function(e){_=_.filter((function(t){return t.tag_id!=e.tag_id}))}))):g=[],h(),p.addEventListener("input",(function(){var e=p.value.toLowerCase(),t=v.options,n=0;if(""!=e){for(var a=0;a<t.length;a++){var r=t[a];r.text.toLowerCase().includes(e)?(r.style.display="",n++):r.style.display="none"}n>8&&(n=8),v.size=n}else{for(var c=0;c<t.length;c++)t[c].style.display="";v.size=8}})),v.addEventListener("click",(function(t){var n=v.selectedOptions[0];n.dataset.tag&&(_=_.filter((function(e){return e.tag_id!=n.dataset.tag})),g=[].concat(e(g),e(m.filter((function(e){return e.tag_id==n.dataset.tag})))),h(),Array.from(document.getElementById("tags_input_dropdown_container").children).forEach((function(e){e.blur()})),p.value="",p.dispatchEvent(new Event("input")))})),f.addEventListener("click",(function(t){if(t.target.dataset.tag){var a=m.filter((function(e){return e.tag_id==t.target.dataset.tag}));g=g.filter((function(e){return e.tag_id!=t.target.dataset.tag})),(_=[].concat(e(_),e(a))).sort((function(e,t){return e.tag_name[n]>t.tag_name[n]?1:e.tag_name[n]<t.tag_name[n]?-1:0})),h(),v.dispatchEvent(new Event("sendToAPI"))}})),document.getElementById("search_field_reset").addEventListener("click",(function(){var t=Array.from(document.querySelectorAll("[data-reset]"));_=e(m),g=[],h(),t.forEach((function(e){switch(e.dataset.reset){case"text":e.value="";break;case"select":e.selectedIndex=0;break;case"checkbox":e.checked=!1;break;case"range_min":e.value=u.min,s();break;case"range_max":e.value=u.max,s();break;default:console.log("something wrong with resetBtn")}e.dispatchEvent(new Event("input"))}))}));var y=document.getElementById("catalog_search_form"),E=document.getElementById("search_fields_toggle");E.addEventListener("click",(function(){E.classList.toggle("active"),y.classList.toggle("active")}))})();