(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var n=document.getElementById("min_range_slider"),a=document.getElementById("max_range_slider"),r=document.getElementById("price_range_display"),c=document.getElementById("range_slider_visual"),i=search_fields.price_range;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.value,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.value,o="hsl(238, 83%, 62%)",l="hsl(360, 0%, 35%)",d=e/i.max*100,u=t/i.max*100;c.style.background="linear-gradient(to right, ".concat(l," 0%, ").concat(l," ").concat(d,"%, ").concat(o," ").concat(d,"%, ").concat(o," ").concat(u,"%, ").concat(l," ").concat(u,"%, ").concat(l," 100%)"),r.textContent="$ ".concat(e," - $ ").concat(t)}[n,a].forEach((function(e){Object.assign(e,{min:i.min,max:i.max,value:e===n?search_query.price_range_min||i.min:search_query.price_range_max||i.max})})),o(),n.addEventListener("input",(function(){+n.value>+a.value&&(n.value=a.value),o()})),a.addEventListener("input",(function(){+a.value<+n.value&&(a.value=n.value),o()}));var l,d=search_fields.tags,u=document.getElementById("selected_tags"),s=document.getElementById("tags_dropdown"),g=document.getElementById("tags_filter_input"),m=e(d);function f(){var e=Array.from(s.querySelectorAll("[data-tag]")),t=Array.from(u.children);e.forEach((function(e){e.remove()})),t.forEach((function(e){e.remove()})),m.length>0&&m.forEach((function(e){var t=document.createElement("option");t.value=e.tag_id,t.text=e.name[lang],t.dataset.tag=e.tag_id,s.appendChild(t)})),l.length>0&&l.forEach((function(e){var t=document.createElement("li"),n=document.createElement("label"),a=document.createElement("input"),r=document.createElement("span");t.classList.add("selected_tag"),a.type="checkbox",a.setAttribute("checked",!0),a.value=e.tag_id,a.dataset.tag=e.tag_id,a.name="selected_tags",r.textContent=e.name[lang],n.appendChild(a),n.appendChild(r),t.appendChild(n),u.appendChild(t)}))}search_query.selected_tags?(search_query.selected_tags.forEach((function(t){var n;l?(n=l).push.apply(n,e(d.filter((function(e){return e.tag_id==t})))):l=d.filter((function(e){return e.tag_id==t}))})),l.forEach((function(e){m=m.filter((function(t){return t.tag_id!=e.tag_id}))}))):l=[],f(),g.addEventListener("input",(function(){var e=g.value.toLowerCase(),t=s.options;if(""!=e)for(var n=0;n<t.length;n++){var a=t[n];a.text.toLowerCase().includes(e)?a.style.display="":a.style.display="none"}else for(var r=0;r<t.length;r++)t[r].style.display=""})),s.addEventListener("click",(function(t){var n=s.selectedOptions[0];n.dataset.tag&&(m=m.filter((function(e){return e.tag_id!=n.dataset.tag})),l=[].concat(e(l),e(d.filter((function(e){return e.tag_id==n.dataset.tag})))),f(),Array.from(document.getElementById("tags_input_dropdown_container").children).forEach((function(e){e.blur()})),g.value="")})),u.addEventListener("click",(function(t){if(t.target.dataset.tag){var n=d.filter((function(e){return e.tag_id==t.target.dataset.tag}));l=l.filter((function(e){return e.tag_id!=t.target.dataset.tag})),(m=[].concat(e(m),e(n))).sort((function(e,t){return e.name[lang]>t.name[lang]?1:e.name[lang]<t.name[lang]?-1:0})),f(),s.dispatchEvent(new Event(eventAPI))}})),document.getElementById("search_field_reset").addEventListener("click",(function(){var t=Array.from(document.querySelectorAll("[data-reset]"));m=e(d),l=[],f(),t.forEach((function(e){switch(e.dataset.reset){case"text":e.value="";break;case"select":e.selectedIndex=0;break;case"checkbox":e.checked=!1;break;case"range_min":e.value=i.min,o();break;case"range_max":e.value=i.max,o();break;default:console.log("something wrong with resetBtn")}e.dispatchEvent(new Event("input"))}))}));var v=document.getElementById("catalog_search_form"),_=document.getElementById("search_fields_toggle");_.addEventListener("click",(function(){_.classList.toggle("active"),v.classList.toggle("active")}))})();